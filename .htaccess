# Установка главной страницы (отдаём через PHP-роутер)
DirectoryIndex index.php login.html index.html

# Включаем mod_rewrite
RewriteEngine On

# Перенаправляем прямые запросы к index.html на корень (index.php)
RewriteCond %{THE_REQUEST} \s/+index\.html [NC]
RewriteRule ^index\.html$ index.php [R=301,L]

# Запрет на просмотр каталогов
Options -Indexes

# Кодировка по умолчанию
AddDefaultCharset UTF-8

# Запрет прямого доступа к скрипту Google Apps Script (устарело)
<FilesMatch "google-apps-script\.js$">
    Require all denied
</FilesMatch>

# Разрешаем загрузку файлов в /uploads и доступ к API
<Files "api.php">
    Require all granted
</Files>

# Сообщение об ошибке 404
ErrorDocument 404 /login.html 